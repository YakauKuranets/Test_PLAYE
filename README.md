# Test_PLAYE

## Требования (первый этап)

Ниже перечислены базовые возможности, которые должен поддерживать **криминалистический видеоплеер** на первом этапе:

- Поддержка всех доступных видео‑кодеков (максимально широкая совместимость).
- Ускорение воспроизведения вплоть до **x100**.
- Приближение/масштабирование видео колесиком мыши.
- Боковая панель со списком видео для выбора и просмотра.
- Создание скриншота текущего кадра.
- Нарезка/обрезка видео (выбор диапазона и экспорт).
- Детектор движения.
- Авто-маркеры движения с настройкой чувствительности и интервала.
- Апскейл видео.
- Покадровый просмотр.
- Улучшение качества видео.
- AI‑обработка лица человека (улучшение качества).
- Демо‑детекция лиц (FaceDetector API при поддержке браузера).
- Демо‑детекция объектов (контрастные области кадра) с разметкой.
- Демо‑трекинг объектов между кадрами с ID треков и историей перемещения.
- AI super-resolution (demo) с выбором фактора масштабирования.
- Авто‑сегментация сцен (demo) по перепадам яркости с добавлением AI‑маркеров.
- AI‑маркеры лиц при детекции (для журналирования).
- Журнал цепочки обработки и маркеры событий для криминалистического анализа.
- Таймлайн с масштабированием, маркерами и точным переходом по времени.
- Хэширование импортируемых файлов и экспорт сводного отчёта по делу.
- Предпросмотр HTML-отчёта с возможностью печати/PDF.
- Расширенная обработка качества (шумоподавление, Ч/Б режим, сброс фильтров).
- Стабилизация (демо через кроп/масштабирование).
- Ручные смещения стабилизации (X/Y) для подстройки кадра.
- Авто-стабилизация (демо-алгоритм) с анализом движения и сглаживанием.
- Профили стабилизации (Light/Medium/Strong) для разных уровней сглаживания.
- Контроль экспозиции для тонкой настройки яркости.
- Температура (цветовой баланс) для корректировки оттенков.
- Профили обработки для low-light/ночных сцен и детализации.
- Дополнительный профиль Ultra Low-light для экстремально темных сцен.
- Профили шумоподавления, усиление low-light и ручная детализация (clarity).
- Резкость (demo) как отдельный регулируемый параметр обработки.
- Temporal шумоподавление (demo) с настраиваемым окном кадров.
- Апскейл как отдельный режим обработки с выбором фактора масштабирования.
- Маркеры событий с типами и комментариями для точной разметки.
- Локальная библиотека дел (сохранение и загрузка сессий).
- Карточка дела со статусом, тегами и краткой сводкой.
- Поиск и фильтрация по библиотеке дел.
- Экспорт/импорт локальной библиотеки дел.
- Сводка по делу (количество файлов, маркеров, записей журнала).
- UI-кнопка запуска экспорта FFmpeg Job (demo) как старт блока Integrations (3.1.1).
- Сбор FFmpeg Job draft из текущих параметров обработки и показ JSON в интерфейсе (3.1.2).
- Экспорт FFmpeg Job в JSON для Integrations pipeline с аудит‑логом (3.1.3).
- Конфиг выбора AI runtime provider (mock/onnx/torch) в UI с логированием (3.2.1).
- Интерфейс AI model adapter с единым API вызовов (detectFaces/detectObjects/detectScenes) (3.2.2).
- Mock‑pipeline инференса с этапами pre/inference/post и audit‑логом выполнения (3.2.3).
- Логирование AI provider/model version в экспорт отчёта и FFmpeg Job payload (3.2.4).
- Capability-check AI/GPU (WebGPU/WebGL/CPU fallback) с UI-статусом и audit-логом (3.3.1).
- Mock backend-pipeline очередь задач (pending/running/done/failed) с UI-списком и статусом (3.3.2).
- UI-прогресс обработки pipeline задач (progress bar + проценты в очереди) (3.3.3).
- Retry-механизм и системный лог ошибок pipeline (ошибки + попытки + финальный fail) (3.3.4).

## Архитектура прототипа

Прототип разбит на независимые **blueprint**-модули и центральный **orchestrator**,
который подключает их к общему контексту состояния/действий. Это упрощает
масштабирование и дальнейшее развитие функциональности.

В прототип добавлены базовые криминалистические элементы: журнал действий,
экспортируемые маркеры событий и связка с идентификатором дела.

## Как сделать проект «максимально жирным»

Ниже — базовый каркас для «большого» криминалистического продукта с масштабируемой архитектурой,
полным набором инструментов и подготовкой к командной разработке.

### 1) Продуктовая рамка
- **Целевая аудитория**: криминалисты, следователи, службы безопасности, аналитики видео.
- **Ключевые кейсы**: быстрый просмотр доказательств, поиск событий, разметка таймлайна, экспорт фрагментов.
- **USP**: сверхскоростной просмотр, проверяемая цепочка обработки, AI‑улучшения и smart‑детектор.

### 2) Архитектура и модули
- **Core**: проигрыватель, таймлайн, плейлист, экспорт доказательств.
- **Processing**: фильтры, апскейл, стабилизация, шумоподавление.
- **AI**: лица/объекты, трекинг, авто‑сцены, суперрезолюция.
- **Storage**: локальная библиотека, метаданные, кеш, теги, журнал действий.
- **Integrations**: ffmpeg, onnx/torch, WebGPU/Metal/CUDA.

### 3) Технический стек (ориентир)
- **Frontend**: React/Vue + WebGPU/WebGL для ускорения.
- **Backend**: Node/Rust + ffmpeg‑pipeline, очереди задач.
- **AI**: ONNX Runtime / PyTorch, модель‑зоо.
- **Data**: SQLite/Postgres для метаданных, object storage для ассетов.

### 4) Инструменты разработки
- Декомпозиция по **blueprint**‑модулям.
- **Design‑system** и компоненты UI (Figma → Storybook).
- **CI/CD**, линтеры, автотесты, perf‑бенчмарки.

### 5) Предлагаемые этапы
1. **MVP**: текущий прототип + стабильная нарезка, таймлайн, горячие клавиши.
2. **Pro**: библиотека, маркеры событий, быстрый экспорт пресетов.
3. **AI**: детекция объектов/лиц, апскейл, авто‑улучшения.
4. **Enterprise**: масштабирование, права, совместная работа.

## Локальный запуск (прототип)

1. Откройте файл `index.html` в браузере.
2. Загрузите одно или несколько видео через кнопку «Загрузить видео».
3. Выберите ролик в списке и используйте элементы управления для тестирования функций.

> Прототип реализован на чистом HTML/CSS/JS и использует возможности браузера.
